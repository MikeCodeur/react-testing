# Test en boite noir
### ğŸ’¡ Test en boite noir

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/01.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Un
[test en boite noir](https://fr.wikipedia.org/wiki/Test_de_la_bo%C3%AEte_noire)
signifie que l'on teste une fonctionnalitÃ© sans avoir a connaitre ce qu'elle
contient. C'est Ã  dire indÃ©pendamment de son implÃ©mentation. Et c'est ce que
nous cherchons aux maximum Ã  faire lorsque l'on teste nos composants React. Si
l'on regarde actuellement l'implÃ©mentation de notre composant `<Hello/>`, nous
utilisons un bouton implÃ©menter avec un input :
`<input type="button" value="envoyer" onClick={e => setLabel(Merci)} />`. Si
nous dÃ©cidons de changer par un `<button />,` ce qui donne strictement le mÃªme
comportement, alors tous nos tests echouent

```jsx
<button onClick={e => setLabel(`Merci`)}>envoyer</button>
```

Autre cas intÃ©ressant : Notre libellÃ© est afficher dans une `div` qui contient
une autre `div`.

```jsx
return (
   <div>
      <div role="status">{label}</div>
   </div>
}
```

imaginons que nous ajoutions une div intermÃ©diaire pour des besoins particuliers

```jsx

return (
   <div>
      <div><div role="status">{label}</div></div>
   </div>
}
```

Tous les tests seraient en Ã©checs. car `container.firstChild` ne retournerait
plus le bon Ã©lÃ©ments.

```jsx
const label = container.firstChild.querySelector('div')
```

L'idÃ©es est donc de tester en abstrayant le plus possible les dÃ©tails
implÃ©mentation. C'est ce que `testing-library` nous permet de faire via des
fonctionnalitÃ©s intÃ©ressantes.

## Exercice

Dans cet exercice nous testons le composant `helloreset` qui est le mÃªme que
prÃ©cÃ©demment mais avec un bouton `reset`

```jsx
import Hello from '../../components/helloreset'
```

L'objectif est de s'abstraire de l'implÃ©mentation en utilisant
`screen.getByRole` qui va rÃ©cupÃ©rer un Ã©lÃ©ment en fonction de son rÃ´le dÃ©finit
dans
l'[arbre d'accessibilitÃ©](https://developer.mozilla.org/fr/docs/Glossary/Accessibility_tree)
.

`screen.getByRole('button')` retournera un buton, peut importe son
implÃ©mentation. Par exemple notre Button pourrait Ãªtre implÃ©menter avec une div

```jsx
<div role="button" onClick={e => setLabel(`Merci`)}>
  envoyer
</div>
```

## Bonus

### 1. ğŸš€ UserEvent

`fireEvent.click()` dÃ©clenche un click. Mais est ce vraiment le comportent
identique d'un utilisateur ? Que fais un utilisateur quand il click sur un
button ?

- Il va dÃ©placer sa souris (`mousemove`)
- passer un dessus du bouton (`mouseover`)
- il va cliquer (`click`)
- sortir du bouton (`mouseout`)

Si l'on voulait Ãªtre rigoureux il faudrait implÃ©menter tous ces cas.
`testing-library` nous propose le module `'@testing-library/user-event'` Dans
cet exercice nous allons dÃ©plancher les click via `userEvent`

```jsx
import userEvent from '@testing-library/user-event'
```

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).
